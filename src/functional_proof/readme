Functional-style transitions written using `proof` functions